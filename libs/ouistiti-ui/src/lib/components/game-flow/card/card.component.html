<svg xmlns="http://www.w3.org/2000/svg" width="125" height="175" viewBox="0 0 125 175" [ngClass]="svgClasses">
  <defs>
    <svg [id]="'card-' + id + '-symbol'" width="25" height="25" viewBox="256 256 512 512">
      <path [id]="'card-' + id + '-symbol-path'" [attr.d]="symbolPath" />
    </svg>
    <svg [id]="'card-' + id + '-inv-symbol'" width="25" height="25" viewBox="256 256 512 512">
      <use [attr.href]="'#card-' + id + '-symbol-path'" transform="scale(1,-1)" transform-origin="center" />
    </svg>
    <svg [id]="'card-' + id + '-number'">
      <text class="card-text" textLength="11px" lengthAdjust="spacingAndGlyphs" letter-spacing="-4">{{ numberValue }}</text>
      <use [attr.href]="'#card-' + id + '-symbol'" x="7.5" y="12" width="15" height="15" />
    </svg>
  </defs>

  <rect class="card-background" />

  <ng-container *ngIf="isFaceUp; else cardBackTemplate">
    <ng-container *ngIf="!miniature; else: miniatureCardTemplate">
      <use
        *ngFor="let pos of symbolPositions"
        [attr.href]="'#card-' + id + (pos.inv ? '-inv-symbol' : '-symbol')"
        [attr.x]="pos.x"
        [attr.y]="pos.y"
        [ngClass]="{ inv: pos.inv, large: pos.large }" />

      <use [attr.href]="'#card-' + id + '-number'" x="2" y="22" />

      <use [attr.href]="'#card-' + id + '-number'" x="2" y="22" transform="scale(-1,-1)" transform-origin="center" />

      <ng-container *ngIf="isFaceCard">
        <image class="face" [attr.href]="faceCardImagePath" />
        <rect class="face-outline" />
      </ng-container>
    </ng-container>

    <ng-template #miniatureCardTemplate>
      <use [attr.href]="'#card-' + id + '-number'" x="8" y="21" transform="scale(4)" />
    </ng-template>
  </ng-container>

  <ng-template #cardBackTemplate>
    <image
      class="back"
      preserveAspectRatio="none"
      [attr.href]="cardBackPath"
      *ngIf="!miniature; else miniatureCardTemplate" />

    <ng-template #miniatureCardTemplate>
      <rect class="miniature-back"></rect>
      <svg *ngIf="dotted" class="dotted-symbol" width="62.5" height="62.5" x="62.5" y="87.5" viewBox="256 256 512 512">
        <path [attr.d]="symbolPath" />
      </svg>
    </ng-template>
  </ng-template>
</svg>
